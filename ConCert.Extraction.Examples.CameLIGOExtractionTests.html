<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<link href="toc.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="toc.html">Table of contents</a>
      <a href="https://github.com/AU-COBRA/ConCert" target="_balnk">Project Page</a>
    </span>
</div>
  <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="js-toc-header" class="toc-header">Contents:</div>
    <div id="js-toc" class="toc" data-toc="h1,h2,h3,h4" data-toc-container="doc">
    </div>
    <div id="main">
<h1 class="libtitle">Library ConCert.Extraction.Examples.CameLIGOExtractionTests</h1>

<div class="code">
</div>

<div class="doc">
<a name="lab84"></a><h1 class="section">Extraction of various contracts to CameLIGO</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.ZArith.ZArith.html#"><span class="id" title="library">ZArith</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Strings.String.html#"><span class="id" title="library">String</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.micromega.Lia.html#"><span class="id" title="library">Lia</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.Template</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">All</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Embedding</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Embedding.Notations.html#"><span class="id" title="library">Notations</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Embedding.Extraction</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">PreludeExt</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Embedding.Extraction</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Crowdfunding</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Embedding.Extraction</span> <span class="id" title="keyword">Require</span> <span class="id" title="library">SimpleBlockchainExt</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Embedding.Extraction</span> <span class="id" title="keyword">Require</span> <span class="id" title="library">CrowdfundingData</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Extraction</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Extraction.Common.html#"><span class="id" title="library">Common</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Extraction</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Extraction.CameLIGOPretty.html#"><span class="id" title="library">CameLIGOPretty</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Extraction</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#"><span class="id" title="library">CameLIGOExtract</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Execution</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Execution.Blockchain.html#"><span class="id" title="library">Blockchain</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Execution</span> <span class="id" title="keyword">Require</span> <a class="idref" href="ConCert.Extraction.Common.html#to_kername"><span class="id" title="definition">Import</span></a> <a class="idref" href="ConCert.Execution.Containers.html#"><span class="id" title="library">Containers</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Execution.Examples</span> <span class="id" title="keyword">Require</span> <a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#"><span class="id" title="library">EIP20Token</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">MonadNotation</span>.<br/>

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">string_scope</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Z</span>.<br/>

<br/>
<span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">PrintConfShortNames.PrintWithShortNames</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="bindOptCont"><span class="id" title="definition">bindOptCont</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">a</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">f</span> : <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#B"><span class="id" title="variable">B</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#B"><span class="id" title="variable">B</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">a</span> =&gt; <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#a"><span class="id" title="variable">a</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a name="SafeHead"><span class="id" title="module">SafeHead</span></a>.<br/>
</div>

<div class="doc">
This module shows how one can extract programs containing <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#False_rect"><span class="id" title="definition">False_rect</span></a></span> 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">list</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">nat</span>.<br/>

<br/>
</div>

<div class="doc">
We cannot make <span class="inlinecode"><a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#SafeHead.safe_head"><span class="id" title="definition">safe_head</span></a></span> polymoprhic due to CameLIGO restrictions 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Program Definition</span> <a name="SafeHead.safe_head"><span class="id" title="definition">safe_head</span></a> (<span class="id" title="var">l</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">non_empty</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Peano.html#7f2a7ef2c63af7359b22787a9daf336e"><span class="id" title="notation">&gt;</span></a> 0) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#l"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">l'</span> <span class="id" title="keyword">return</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#l'"><span class="id" title="variable">l'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>  <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <span class="comment">(*&nbsp;this&nbsp;is&nbsp;an&nbsp;impossible&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;NOTE:&nbsp;we&nbsp;use&nbsp;<span class="inlinecode"><span class="id" title="var">False_rect</span></span>&nbsp;to&nbsp;have&nbsp;more&nbsp;control&nbsp;over&nbsp;the&nbsp;extracted&nbsp;code.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Leaving&nbsp;a&nbsp;hole&nbsp;for&nbsp;the&nbsp;whole&nbsp;branch&nbsp;potentially&nbsp;leads&nbsp;to&nbsp;polymoprhic&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;definitions&nbsp;in&nbsp;the&nbsp;extracted&nbsp;code&nbsp;and&nbsp;type&nbsp;like&nbsp;<span class="inlinecode"><span class="id" title="var">eq</span></span>,&nbsp;since&nbsp;we&nbsp;would&nbsp;have&nbsp;to&nbsp;leave&nbsp;the&nbsp;whole&nbsp;goal&nbsp;branch&nbsp;transparent&nbsp;(use&nbsp;<span class="inlinecode"><span class="id" title="keyword">Defined</span></span>&nbsp;instead&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="keyword">Qed</span></span>&nbsp;).&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;In&nbsp;this&nbsp;case,&nbsp;one&nbsp;has&nbsp;to&nbsp;inspect&nbsp;the&nbsp;extracted&nbsp;code&nbsp;and&nbsp;inline&nbsp;such&nbsp;definitions&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#False_rect"><span class="id" title="definition">False_rect</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">hd</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">tl</span> =&gt; <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">hd</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">non_empty</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Program Definition</span> <a name="SafeHead.head_of_list_2"><span class="id" title="definition">head_of_list_2</span></a> (<span class="id" title="var">xs</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) := <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#SafeHead.safe_head"><span class="id" title="definition">safe_head</span></a> (0 <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#xs"><span class="id" title="variable">xs</span></a>)  <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
We inline <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#False_rect"><span class="id" title="definition">False_rect</span></a></span> and <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#False_rec"><span class="id" title="definition">False_rec</span></a></span> to make sure that no polymoprhic definitions are left 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="SafeHead.safe_head_inline"><span class="id" title="definition">safe_head_inline</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#False_rect"><span class="id" title="definition">False_rect</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#False_rec"><span class="id" title="definition">False_rec</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="SafeHead.TT_consts"><span class="id" title="definition">TT_consts</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a> <a class="idref" href="ConCert.Extraction.Common.html#remap"><span class="id" title="definition">remap</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> @<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#hd_error"><span class="id" title="definition">hd_error</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a> "List.head_opt" <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="SafeHead.TT_ctors"><span class="id" title="definition">TT_ctors</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>"O"<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a>"0n"<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="SafeHead.harness"><span class="id" title="definition">harness</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;"let main (st : unit * nat option) : operation list * (nat option)  = (([]: operation list), Some (head_of_list_2 ([] : nat list)))".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Time</span> <span class="id" title="var">MetaCoq</span> <span class="id" title="var">Run</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">t</span> <span class="id" title="notation">&lt;-</span> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#CameLIGO_extract_single"><span class="id" title="definition">CameLIGO_extract_single</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#SafeHead.safe_head_inline"><span class="id" title="definition">safe_head_inline</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#SafeHead.TT_consts"><span class="id" title="definition">TT_consts</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#SafeHead.TT_ctors"><span class="id" title="definition">TT_ctors</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#TT_rename_ctors_default"><span class="id" title="definition">TT_rename_ctors_default</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;""<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#SafeHead.harness"><span class="id" title="definition">harness</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#SafeHead.head_of_list_2"><span class="id" title="definition">head_of_list_2</span></a> <span class="id" title="notation">;;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">tmDefinition</span> "cameligo_safe_head" <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#t"><span class="id" title="variable">t</span></a>).<br/>

<br/>
</div>

<div class="doc">
Extraction results in fully functional CameLIGO code 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Redirect</span> "examples/extracted-code/cameligo-extract/SafeHead.mligo"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">MetaCoq</span> <span class="id" title="var">Run</span> (<span class="id" title="constructor">tmMsg</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#SafeHead.cameligo_safe_head"><span class="id" title="definition">cameligo_safe_head</span></a>).<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#SafeHead"><span class="id" title="module">SafeHead</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a name="Counter"><span class="id" title="module">Counter</span></a>.<br/>

<br/>
</div>

<div class="doc">
Enabling recursors for records allows for deriving <span class="inlinecode"><a class="idref" href="ConCert.Execution.Serializable.html#Serializable"><span class="id" title="record">Serializable</span></a></span> instances. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Set</span> <span class="id" title="var">Nonrecursive</span> <span class="id" title="var">Elimination</span> <span class="id" title="var">Schemes</span>.<br/>

<br/>
</div>

<div class="doc">
The definitions in this section are generalized over the <span class="inlinecode"><a class="idref" href="ConCert.Execution.Blockchain.html#ChainBase"><span class="id" title="record">ChainBase</span></a></span> that specifies the type of addresses and which properties such a type must have 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="Counter.address"><span class="id" title="abbreviation">address</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Counter.operation"><span class="id" title="definition">operation</span></a> := <a class="idref" href="ConCert.Execution.Blockchain.html#ActionBody"><span class="id" title="inductive">ActionBody</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Counter.storage"><span class="id" title="definition">storage</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <span class="id" title="notation">×</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#Counter.address"><span class="id" title="abbreviation">address</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Counter.init"><span class="id" title="definition">init</span></a> (<span class="id" title="var">ctx</span> : <a class="idref" href="ConCert.Execution.Blockchain.html#ContractCallContext"><span class="id" title="record">ContractCallContext</span></a>) (<span class="id" title="var">setup</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#Counter.address"><span class="id" title="abbreviation">address</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#Counter.storage"><span class="id" title="definition">storage</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ctx_</span> := <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#ctx"><span class="id" title="variable">ctx</span></a> <span class="id" title="tactic">in</span> <span class="comment">(*&nbsp;prevents&nbsp;optimisations&nbsp;from&nbsp;removing&nbsp;unused&nbsp;<span class="inlinecode"><span class="id" title="var">ctx</span></span>&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#setup"><span class="id" title="variable">setup</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="Counter.msg"><span class="id" title="inductive">msg</span></a> :=<br/>
&nbsp;&nbsp;| <a name="Counter.Inc"><span class="id" title="constructor">Inc</span></a> (<span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>)<br/>
&nbsp;&nbsp;| <a name="Counter.Dec"><span class="id" title="constructor">Dec</span></a> (<span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Counter.inc_balance"><span class="id" title="definition">inc_balance</span></a> (<span class="id" title="var">st</span> : <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#Counter.storage"><span class="id" title="definition">storage</span></a>) (<span class="id" title="var">new_balance</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#st"><span class="id" title="variable">st</span></a><span class="id" title="notation">.1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#new_balance"><span class="id" title="variable">new_balance</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#st"><span class="id" title="variable">st</span></a><span class="id" title="notation">.2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Counter.dec_balance"><span class="id" title="definition">dec_balance</span></a> (<span class="id" title="var">st</span> : <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#Counter.storage"><span class="id" title="definition">storage</span></a>) (<span class="id" title="var">new_balance</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#st"><span class="id" title="variable">st</span></a><span class="id" title="notation">.1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.ZArith.BinInt.html#fa12f60d56cf7225f009c889c0622139"><span class="id" title="notation">-</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#new_balance"><span class="id" title="variable">new_balance</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#st"><span class="id" title="variable">st</span></a><span class="id" title="notation">.2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Counter.counter_inner"><span class="id" title="definition">counter_inner</span></a> (<span class="id" title="var">msg</span> : <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#Counter.msg"><span class="id" title="inductive">msg</span></a>) (<span class="id" title="var">st</span> : <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#Counter.storage"><span class="id" title="definition">storage</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#Counter.operation"><span class="id" title="definition">operation</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#Counter.storage"><span class="id" title="definition">storage</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#msg"><span class="id" title="variable">msg</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#Counter.Inc"><span class="id" title="constructor">Inc</span></a> <span class="id" title="var">i</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> (0 <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.ZArith.BinInt.html#90a0b0fc12252358f48538aa18bc4b8e"><span class="id" title="notation">&lt;=?</span></a> <span class="id" title="var">i</span>) <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#Counter.inc_balance"><span class="id" title="definition">inc_balance</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#st"><span class="id" title="variable">st</span></a> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#Counter.Dec"><span class="id" title="constructor">Dec</span></a> <span class="id" title="var">i</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> (0 <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.ZArith.BinInt.html#90a0b0fc12252358f48538aa18bc4b8e"><span class="id" title="notation">&lt;=?</span></a> <span class="id" title="var">i</span>) <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#Counter.dec_balance"><span class="id" title="definition">dec_balance</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#st"><span class="id" title="variable">st</span></a> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Counter.counter"><span class="id" title="definition">counter</span></a> (<span class="id" title="var">c</span> : <a class="idref" href="ConCert.Execution.Blockchain.html#Chain"><span class="id" title="record">Chain</span></a>) (<span class="id" title="var">ctx</span> : <a class="idref" href="ConCert.Execution.Blockchain.html#ContractCallContext"><span class="id" title="record">ContractCallContext</span></a>) <span class="id" title="var">st</span> <span class="id" title="var">msg</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;avoid&nbsp;erasing&nbsp;c&nbsp;and&nbsp;ctx&nbsp;arguments&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">c_</span> := <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ctx_</span> := <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#ctx"><span class="id" title="variable">ctx</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#msg"><span class="id" title="variable">msg</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">msg</span> =&gt;<a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#Counter.counter_inner"><span class="id" title="definition">counter_inner</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#msg"><span class="id" title="variable">msg</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#st"><span class="id" title="variable">st</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Counter.LIGO_COUNTER_MODULE"><span class="id" title="definition">LIGO_COUNTER_MODULE</span></a> : <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#CameLIGOMod"><span class="id" title="record">CameLIGOMod</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#Counter.msg"><span class="id" title="inductive">msg</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <span class="id" title="notation">×</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#Counter.address"><span class="id" title="abbreviation">address</span></a>) <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#Counter.storage"><span class="id" title="definition">storage</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#Counter.operation"><span class="id" title="definition">operation</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <span class="comment">(*&nbsp;a&nbsp;name&nbsp;for&nbsp;the&nbsp;definition&nbsp;with&nbsp;the&nbsp;extracted&nbsp;code&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">lmd_module_name</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">:=</span></a> "cameLIGO_counter" <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">;</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;and&nbsp;a&nbsp;test&nbsp;address&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">lmd_prelude</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">CameLIGOPrelude</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">++</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">nl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">++</span></a> "let test_account : address = (""tz1KqTpEZ7Yob7QbPE4Hy4Wo8fHG8LhKxZSx"" : address)"<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">;</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;initial&nbsp;storage&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">lmd_init</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">init</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">;</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;no&nbsp;extra&nbsp;operations&nbsp;in&nbsp;<span class="inlinecode"><span class="id" title="var">init</span></span>&nbsp;are&nbsp;required&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">lmd_init_prelude</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">:=</span></a> "" <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">;</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;the&nbsp;main&nbsp;functionality&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">lmd_receive_prelude</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">:=</span></a> ""<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">;</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">lmd_receive</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">counter</span></a><a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">;</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;code&nbsp;for&nbsp;the&nbsp;entry&nbsp;point&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">lmd_entry_point</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">CameLIGOPretty.printWrapper</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">(</span></a>"counter"<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">)</span></a> "msg" "storage" <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">++</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">nl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">++</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">CameLIGOPretty.printMain</span></a> "storage" |}.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#Counter"><span class="id" title="module">Counter</span></a>.<br/>
<span class="id" title="keyword">Section</span> <a name="CounterExtraction"><span class="id" title="section">CounterExtraction</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <span class="id" title="var">Counter</span>.<br/>
</div>

<div class="doc">
A translation table for definitions we want to remap. The corresponding top-level definitions will be *ignored* 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="TT_remap_counter"><span class="id" title="definition">TT_remap_counter</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<span class="id" title="definition">kername</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a> <a class="idref" href="ConCert.Extraction.Common.html#remap"><span class="id" title="definition">remap</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> <span class="id" title="inductive">address_coq</span> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a> "address"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="ConCert.Extraction.Common.html#remap"><span class="id" title="definition">remap</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> <span class="id" title="inductive">time_coq</span> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a> "timestamp"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="ConCert.Extraction.Common.html#remap"><span class="id" title="definition">remap</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a> "address"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="ConCert.Extraction.Common.html#remap"><span class="id" title="definition">remap</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#operation"><span class="id" title="definition">operation</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a> "operation"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a>.<br/>

<br/>
</div>

<div class="doc">
We run the extraction procedure inside the <span class="inlinecode"><span class="id" title="library">TemplateMonad</span></span>. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;uses&nbsp;the&nbsp;certified&nbsp;erasure&nbsp;from&nbsp;<span class="inlinecode"><span class="id" title="var">MetaCoq</span></span>&nbsp;and&nbsp;the&nbsp;certified&nbsp;deboxing&nbsp;procedure&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;removes&nbsp;application&nbsp;of&nbsp;boxes&nbsp;to&nbsp;constants&nbsp;and&nbsp;constructors.&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
NOTE: running computations inside <span class="inlinecode"><span class="id" title="library">TemplateMonad</span></span> is quite slow. That's why we comment out this code and use a different way below 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Time&nbsp;MetaCoq&nbsp;Run&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(t&nbsp;&lt;-&nbsp;CameLIGO_extract&nbsp;<span class="inlinecode"></span>&nbsp;TT_remap_counter&nbsp;<span class="inlinecode"></span>&nbsp;<span class="inlinecode"></span>&nbsp;CameLIGO_call_ctx&nbsp;LIGO_COUNTER_MODULE&nbsp;;;&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmDefinition&nbsp;LIGO_COUNTER_MODULE.(lmd_module_name)&nbsp;t).&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;If&nbsp;we&nbsp;first&nbsp;prepare&nbsp;the&nbsp;environment&nbsp;for&nbsp;erasure&nbsp;in&nbsp;<span class="inlinecode"><span class="id" title="var">TemplateMonad</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;run&nbsp;erasure/prining&nbsp;outside&nbsp;of&nbsp;it,&nbsp;it&nbsp;works&nbsp;~4&nbsp;times&nbsp;faster&nbsp;for&nbsp;this&nbsp;example&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
This command adds <span class="inlinecode"><a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#cameLIGO_counter_prepared"><span class="id" title="definition">cameLIGO_counter_prepared</span></a></span> to the environment, 
</div>
<div class="code">
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;can&nbsp;be&nbsp;evaluated&nbsp;later&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Time</span> <span class="id" title="var">MetaCoq</span> <span class="id" title="var">Run</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#CameLIGO_prepare_extraction"><span class="id" title="definition">CameLIGO_prepare_extraction</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#TT_remap_counter"><span class="id" title="definition">TT_remap_counter</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#TT_rename_ctors_default"><span class="id" title="definition">TT_rename_ctors_default</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> "cctx_instance" <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#LIGO_COUNTER_MODULE"><span class="id" title="definition">LIGO_COUNTER_MODULE</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Time</span> <span class="id" title="keyword">Definition</span> <a name="cameLIGO_counter_1"><span class="id" title="definition">cameLIGO_counter_1</span></a> := <span class="id" title="keyword">Eval</span> <span class="id" title="keyword">vm_compute</span> <span class="id" title="tactic">in</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#cameLIGO_counter_prepared"><span class="id" title="definition">cameLIGO_counter_prepared</span></a>.<br/>

<br/>
</div>

<div class="doc">
We redirect the extraction result for later processing and compiling with the CameLIGO compiler 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="var">Redirect</span> "examples/extracted-code/cameligo-extract/CounterCertifiedExtraction.mligo"<br/>
&nbsp;&nbsp;<span class="id" title="var">MetaCoq</span> <span class="id" title="var">Run</span> (<span class="id" title="constructor">tmMsg</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#cameLIGO_counter_1"><span class="id" title="definition">cameLIGO_counter_1</span></a>).<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#CounterExtraction"><span class="id" title="section">CounterExtraction</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a name="Crowdfunding"><span class="id" title="module">Crowdfunding</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="var">Program</span> <span class="id" title="keyword">Instance</span> <a name="Crowdfunding.CB"><span class="id" title="instance">CB</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#ChainBase"><span class="id" title="class">ChainBase</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Blockchain.html#build_chain_base"><span class="id" title="constructor">build_chain_base</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Arith.PeanoNat.html#Nat.eqb"><span class="id" title="definition">Nat.eqb</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Arith.PeanoNat.html#Nat.odd"><span class="id" title="definition">Nat.odd</span></a>. <span class="comment">(*&nbsp;Odd&nbsp;addresses&nbsp;are&nbsp;addresses&nbsp;of&nbsp;contracts&nbsp;:)&nbsp;*)</span><br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.eqb_spec"><span class="id" title="lemma">NPeano.Nat.eqb_spec</span></a>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="Crowdfunding.storage"><span class="id" title="abbreviation">storage</span></a> := (<span class="id" title="notation">(</span><span class="id" title="inductive">time_coq</span> <span class="id" title="notation">×</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <span class="id" title="notation">×</span> <span class="id" title="inductive">address_coq</span><span class="id" title="notation">)</span> <span class="id" title="notation">×</span> <span class="id" title="inductive">Maps.addr_map_coq</span> <span class="id" title="notation">×</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Crowdfunding.crowdfunding_init"><span class="id" title="definition">crowdfunding_init</span></a> (<span class="id" title="var">ctx</span> : <a class="idref" href="ConCert.Execution.Blockchain.html#ContractCallContext"><span class="id" title="record">ContractCallContext</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">setup</span> : (<span class="id" title="inductive">time_coq</span> <span class="id" title="notation">×</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <span class="id" title="notation">×</span> <span class="id" title="inductive">address_coq</span>)) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#Crowdfunding.storage"><span class="id" title="abbreviation">storage</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#ctx"><span class="id" title="variable">ctx</span></a>.(<a class="idref" href="ConCert.Execution.Blockchain.html#ctx_amount"><span class="id" title="projection">ctx_amount</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.ZArith.BinInt.html#f10153ef1a81fe79ed16d848b456c79b"><span class="id" title="notation">=?</span></a> 0 <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#setup"><span class="id" title="variable">setup</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="constructor">Maps.mnil</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Z</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <span class="id" title="var">SimpleBlockchainExt.AcornBlockchain</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <span class="id" title="var">CrowdfundingData</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <span class="id" title="var">CrowdfundingContract.Receive</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Crowdfunding.to_simple_ctx_addr"><span class="id" title="definition">to_simple_ctx_addr</span></a> (<span class="id" title="var">addr</span> : <a class="idref" href="ConCert.Execution.Blockchain.html#Address"><span class="id" title="method">Blockchain.Address</span></a>) : <span class="id" title="inductive">address_coq</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="ConCert.Execution.Blockchain.html#address_is_contract"><span class="id" title="method">address_is_contract</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#addr"><span class="id" title="variable">addr</span></a> <span class="id" title="keyword">then</span> <span class="id" title="constructor">ContractAddr_coq</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#addr"><span class="id" title="variable">addr</span></a> <span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">UserAddr_coq</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#addr"><span class="id" title="variable">addr</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Crowdfunding.crowdfunding_receive_inner"><span class="id" title="definition">crowdfunding_receive_inner</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <a class="idref" href="ConCert.Execution.Blockchain.html#Chain"><span class="id" title="record">Chain</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ctx</span> : <a class="idref" href="ConCert.Execution.Blockchain.html#ContractCallContext"><span class="id" title="record">ContractCallContext</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">params</span> : <span class="id" title="inductive">msg_coq</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">st</span> : <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#Crowdfunding.storage"><span class="id" title="abbreviation">storage</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="inductive">SimpleActionBody_coq</span> <span class="id" title="notation">×</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#Crowdfunding.storage"><span class="id" title="abbreviation">storage</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">receive</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#params"><span class="id" title="variable">params</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#st"><span class="id" title="variable">st</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="constructor">Time_coq</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#c"><span class="id" title="variable">c</span></a>.(<a class="idref" href="ConCert.Execution.Blockchain.html#current_slot"><span class="id" title="projection">current_slot</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#Crowdfunding.to_simple_ctx_addr"><span class="id" title="definition">to_simple_ctx_addr</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#ctx"><span class="id" title="variable">ctx</span></a>.(<a class="idref" href="ConCert.Execution.Blockchain.html#ctx_from"><span class="id" title="projection">ctx_from</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#ctx"><span class="id" title="variable">ctx</span></a>.(<a class="idref" href="ConCert.Execution.Blockchain.html#ctx_amount"><span class="id" title="projection">ctx_amount</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#ctx"><span class="id" title="variable">ctx</span></a>.(<a class="idref" href="ConCert.Execution.Blockchain.html#ctx_contract_balance"><span class="id" title="projection">ctx_contract_balance</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)))</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Crowdfunding.crowdfunding_receive"><span class="id" title="definition">crowdfunding_receive</span></a> (<span class="id" title="var">c</span> : <a class="idref" href="ConCert.Execution.Blockchain.html#Chain"><span class="id" title="record">Chain</span></a>) (<span class="id" title="var">ctx</span> : <a class="idref" href="ConCert.Execution.Blockchain.html#ContractCallContext"><span class="id" title="record">ContractCallContext</span></a>) <span class="id" title="var">st</span> <span class="id" title="var">msg</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#msg"><span class="id" title="variable">msg</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">msg</span> =&gt; <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#Crowdfunding.crowdfunding_receive_inner"><span class="id" title="definition">crowdfunding_receive_inner</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#ctx"><span class="id" title="variable">ctx</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#msg"><span class="id" title="variable">msg</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#st"><span class="id" title="variable">st</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Crowdfunding.CF_MODULE"><span class="id" title="definition">CF_MODULE</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#CameLIGOMod"><span class="id" title="record">CameLIGOMod</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="inductive">time_coq</span> <span class="id" title="notation">×</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <span class="id" title="notation">×</span> <span class="id" title="inductive">address_coq</span>) <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#Crowdfunding.storage"><span class="id" title="abbreviation">storage</span></a> <span class="id" title="inductive">SimpleActionBody_coq</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <span class="comment">(*&nbsp;a&nbsp;name&nbsp;for&nbsp;the&nbsp;definition&nbsp;with&nbsp;the&nbsp;extracted&nbsp;code&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">lmd_module_name</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">:=</span></a> "cameLIGO_crowdfunding" <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">;</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;definitions&nbsp;of&nbsp;operations&nbsp;on&nbsp;pairs&nbsp;and&nbsp;ints&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">lmd_prelude</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">CameLIGOPrelude</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">++</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">nl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">++</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">nl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">++</span></a> "let test_account : address = (""tz1KqTpEZ7Yob7QbPE4Hy4Wo8fHG8LhKxZSx"" : address)"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">++</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">nl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">++</span></a> "let init_storage :  (timestamp * (tez * address)) =
          (Tezos.now, (42tez,(""tz1KqTpEZ7Yob7QbPE4Hy4Wo8fHG8LhKxZSx"": address)))"<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">;</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;initial&nbsp;storage&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">lmd_init</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">crowdfunding_init</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">;</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;init&nbsp;requires&nbsp;some&nbsp;extra&nbsp;operations&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">lmd_init_prelude</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">:=</span></a> ""<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">;</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">lmd_receive_prelude</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">:=</span></a> ""<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">;</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;the&nbsp;main&nbsp;functionality&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">lmd_receive</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">crowdfunding_receive</span></a><a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">;</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;code&nbsp;for&nbsp;the&nbsp;entry&nbsp;point&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">lmd_entry_point</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"type storage = ((time_coq * (tez * address)) * ((address,tez) map * bool))" <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">++</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">CameLIGOPretty.printWrapper</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">(</span></a>"crowdfunding_receive"<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"msg_coq"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"storage"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">++</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">nl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">++</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">CameLIGOPretty.printMain</span></a> "storage" |}.<br/>

<br/>
</div>

<div class="doc">
We run the extraction procedure inside the <span class="inlinecode"><span class="id" title="library">TemplateMonad</span></span>.
      It uses the certified erasure from <span class="inlinecode"><span class="id" title="var">MetaCoq</span></span> and the certified deboxing procedure
      that removes application of boxes to constants and constructors. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#Crowdfunding"><span class="id" title="module">Crowdfunding</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="CrowdfundingExtraction"><span class="id" title="section">CrowdfundingExtraction</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <span class="id" title="var">Crowdfunding</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <span class="id" title="var">SimpleBlockchainExt.AcornBlockchain</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <span class="id" title="var">CrowdfundingData</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <span class="id" title="var">CrowdfundingContract.Receive</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="TT_remap_crowdfunding"><span class="id" title="definition">TT_remap_crowdfunding</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<span class="id" title="definition">kername</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) :=<br/>
<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a>  <span class="comment">(*&nbsp;types&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Common.html#remap"><span class="id" title="definition">remap</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> <span class="id" title="inductive">address_coq</span> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a> "address"<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="ConCert.Extraction.Common.html#remap"><span class="id" title="definition">remap</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> <span class="id" title="inductive">SimpleActionBody_coq</span> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a> "operation"<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="ConCert.Extraction.Common.html#remap"><span class="id" title="definition">remap</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> <span class="id" title="inductive">Maps.addr_map_coq</span> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a> "(address,tez) map"<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;simple&nbsp;addresses&nbsp;and&nbsp;the&nbsp;execution&nbsp;layer&nbsp;addresses&nbsp;are&nbsp;treated&nbsp;as&nbsp;the&nbsp;same&nbsp;*)</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="ConCert.Extraction.Common.html#remap"><span class="id" title="definition">remap</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#to_simple_ctx_addr"><span class="id" title="definition">to_simple_ctx_addr</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a> "(fun (x : address) -&gt; x)"<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;operations&nbsp;*)</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="ConCert.Extraction.Common.html#remap"><span class="id" title="definition">remap</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> <span class="id" title="definition">eqb_addr</span> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a> "eq_addr"<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="ConCert.Extraction.Common.html#remap"><span class="id" title="definition">remap</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> <span class="id" title="definition">Maps.add_map</span> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a> "Map.add"<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="ConCert.Extraction.Common.html#remap"><span class="id" title="definition">remap</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> <span class="id" title="definition">lookup_map'</span> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a> "Map.find_opt"<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a>.<br/>

<br/>
</div>

<div class="doc">
A translation table of constructors and some constants. The corresponding definitions will be extracted and renamed. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="TT_rename"><span class="id" title="definition">TT_rename</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>"nil"<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> "[]"<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>"mnil"<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> "Map.empty"<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Time</span> <span class="id" title="var">MetaCoq</span> <span class="id" title="var">Run</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#CameLIGO_prepare_extraction"><span class="id" title="definition">CameLIGO_prepare_extraction</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#TT_remap_crowdfunding"><span class="id" title="definition">TT_remap_crowdfunding</span></a> (<a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#TT_rename"><span class="id" title="definition">TT_rename</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#TT_rename_ctors_default"><span class="id" title="definition">TT_rename_ctors_default</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> "cctx_instance" <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#CF_MODULE"><span class="id" title="definition">CF_MODULE</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Time</span> <span class="id" title="keyword">Definition</span> <a name="cameLIGO_crowdfunding"><span class="id" title="definition">cameLIGO_crowdfunding</span></a> := <span class="id" title="keyword">Eval</span> <span class="id" title="keyword">vm_compute</span> <span class="id" title="tactic">in</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#cameLIGO_crowdfunding_prepared"><span class="id" title="definition">cameLIGO_crowdfunding_prepared</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">MetaCoq</span> <span class="id" title="var">Run</span> (<span class="id" title="constructor">tmMsg</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#cameLIGO_crowdfunding"><span class="id" title="definition">cameLIGO_crowdfunding</span></a>).<br/>

<br/>
</div>

<div class="doc">
We redirect the extraction result for later processing and compiling with the CameLIGO compiler 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="var">Redirect</span> "examples/extracted-code/cameligo-extract/CrowdfundingCertifiedExtraction.mligo"<br/>
&nbsp;&nbsp;<span class="id" title="var">MetaCoq</span> <span class="id" title="var">Run</span> (<span class="id" title="constructor">tmMsg</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#cameLIGO_crowdfunding"><span class="id" title="definition">cameLIGO_crowdfunding</span></a>).<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#CrowdfundingExtraction"><span class="id" title="section">CrowdfundingExtraction</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="EIP20TokenExtraction"><span class="id" title="section">EIP20TokenExtraction</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <span class="id" title="var">EIP20Token</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Z_scope</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="init"><span class="id" title="definition">init</span></a> (<span class="id" title="var">ctx</span> : <a class="idref" href="ConCert.Execution.Blockchain.html#ContractCallContext"><span class="id" title="record">ContractCallContext</span></a>) (<span class="id" title="var">setup</span> : <a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#Setup"><span class="id" title="record">EIP20Token.Setup</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#State"><span class="id" title="record">EIP20Token.State</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ctx_</span> := <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#ctx"><span class="id" title="variable">ctx</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> {| <a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#build_state"><span class="id" title="constructor">total_supply</span></a> <a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#build_state"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#build_state"><span class="id" title="constructor">setup</span></a><a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#build_state"><span class="id" title="constructor">.(</span></a><a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#build_state"><span class="id" title="constructor">init_amount</span></a><a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#build_state"><span class="id" title="constructor">);</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#build_state"><span class="id" title="constructor">balances</span></a> <a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#build_state"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#build_state"><span class="id" title="constructor">Common.AddressMap.add</span></a> <a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#build_state"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#build_state"><span class="id" title="constructor">EIP20Token.owner</span></a> <a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#build_state"><span class="id" title="constructor">setup</span></a><a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#build_state"><span class="id" title="constructor">)</span></a> <a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#build_state"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#build_state"><span class="id" title="constructor">init_amount</span></a> <a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#build_state"><span class="id" title="constructor">setup</span></a><a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#build_state"><span class="id" title="constructor">)</span></a> <a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#build_state"><span class="id" title="constructor">Common.AddressMap.empty</span></a><a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#build_state"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#build_state"><span class="id" title="constructor">allowances</span></a> <a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#build_state"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#build_state"><span class="id" title="constructor">Common.AddressMap.empty</span></a> |}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="receive_"><span class="id" title="definition">receive_</span></a> (<span class="id" title="var">chain</span> : <a class="idref" href="ConCert.Execution.Blockchain.html#Chain"><span class="id" title="record">Chain</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ctx</span> : <a class="idref" href="ConCert.Execution.Blockchain.html#ContractCallContext"><span class="id" title="record">ContractCallContext</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">state</span> : <a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#State"><span class="id" title="record">EIP20Token.State</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">maybe_msg</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#Msg"><span class="id" title="inductive">EIP20Token.Msg</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#ActionBody"><span class="id" title="inductive">ActionBody</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#State"><span class="id" title="record">EIP20Token.State</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#receive"><span class="id" title="definition">EIP20Token.receive</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#chain"><span class="id" title="variable">chain</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#ctx"><span class="id" title="variable">ctx</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#state"><span class="id" title="variable">state</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#maybe_msg"><span class="id" title="variable">maybe_msg</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">x</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span><span class="id" title="notation">.2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">x</span><span class="id" title="notation">.1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Close</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Z_scope</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="LIGO_EIP20Token_MODULE"><span class="id" title="definition">LIGO_EIP20Token_MODULE</span></a> : <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#CameLIGOMod"><span class="id" title="record">CameLIGOMod</span></a> <a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#Msg"><span class="id" title="inductive">EIP20Token.Msg</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#ContractCallContext"><span class="id" title="record">ContractCallContext</span></a> <a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#Setup"><span class="id" title="record">EIP20Token.Setup</span></a> <a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#State"><span class="id" title="record">EIP20Token.State</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#ActionBody"><span class="id" title="inductive">ActionBody</span></a> :=<br/>
&nbsp;&nbsp;{| <span class="comment">(*&nbsp;a&nbsp;name&nbsp;for&nbsp;the&nbsp;definition&nbsp;with&nbsp;the&nbsp;extracted&nbsp;code&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">lmd_module_name</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">:=</span></a> "cameLIGO_eip20token" <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">;</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;definitions&nbsp;of&nbsp;operations&nbsp;on&nbsp;pairs&nbsp;and&nbsp;ints&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">lmd_prelude</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">CameLIGOPrelude</span></a><a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">;</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;initial&nbsp;storage&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">lmd_init</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">init</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">;</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;NOTE:&nbsp;printed&nbsp;as&nbsp;local&nbsp;<span class="inlinecode"><span class="id" title="keyword">let</span></span>-bound&nbsp;definitions&nbsp;in&nbsp;the&nbsp;init&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">lmd_init_prelude</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">:=</span></a> ""<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">;</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;maybe&nbsp;not&nbsp;needed,&nbsp;<span class="inlinecode"><span class="id" title="var">lmd_prelude</span></span>&nbsp;should&nbsp;be&nbsp;enough&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">lmd_receive_prelude</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">:=</span></a> ""<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">;</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;the&nbsp;main&nbsp;functionality&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">lmd_receive</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">receive_</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">;</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;code&nbsp;for&nbsp;the&nbsp;entry&nbsp;point&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">lmd_entry_point</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">CameLIGOPretty.printWrapper</span></a> "receive_" "msg" "state" <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">++</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">nl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">++</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#Build_CameLIGOMod"><span class="id" title="constructor">CameLIGOPretty.printMain</span></a> "state"|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="TT_remap_eip20token"><span class="id" title="definition">TT_remap_eip20token</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<span class="id" title="definition">kername</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#TT_remap_default"><span class="id" title="definition">TT_remap_default</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Common.html#remap"><span class="id" title="definition">remap</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> @<a class="idref" href="ConCert.Execution.Blockchain.html#ContractCallContext"><span class="id" title="record">ContractCallContext</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOPretty.html#CameLIGO_call_ctx_type_name"><span class="id" title="definition">CameLIGO_call_ctx_type_name</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="ConCert.Extraction.Common.html#remap"><span class="id" title="definition">remap</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> @<a class="idref" href="ConCert.Execution.Blockchain.html#ctx_from"><span class="id" title="projection">ctx_from</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a> "ctx_from"<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="ConCert.Extraction.Common.html#remap"><span class="id" title="definition">remap</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> @<a class="idref" href="ConCert.Execution.Blockchain.html#ActionBody"><span class="id" title="inductive">ActionBody</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a> "operation"<br/>
<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="ConCert.Extraction.Common.html#remap"><span class="id" title="definition">remap</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> @<a class="idref" href="ConCert.Execution.Containers.html#FMap"><span class="id" title="abbreviation">FMap</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a> "map"<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="ConCert.Extraction.Common.html#remap"><span class="id" title="definition">remap</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> @<a class="idref" href="ConCert.Execution.Examples.Common.html#AddressMap.add"><span class="id" title="definition">Common.AddressMap.add</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a> "Map.add"<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="ConCert.Extraction.Common.html#remap"><span class="id" title="definition">remap</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> @<a class="idref" href="ConCert.Execution.Examples.Common.html#AddressMap.find"><span class="id" title="definition">Common.AddressMap.find</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a> "Map.find_opt"<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="ConCert.Extraction.Common.html#remap"><span class="id" title="definition">remap</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> @<a class="idref" href="ConCert.Execution.Examples.Common.html#AddressMap.empty"><span class="id" title="definition">Common.AddressMap.empty</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a> "Map.empty"<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="TT_inlines_eip20token"><span class="id" title="definition">TT_inlines_eip20token</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="definition">kername</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> <a class="idref" href="ConCert.Execution.Monads.html#Monad_option"><span class="id" title="instance">Monads.Monad_option</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> @<a class="idref" href="ConCert.Execution.Monads.html#bind"><span class="id" title="method">Monads.bind</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> @<a class="idref" href="ConCert.Execution.Monads.html#ret"><span class="id" title="method">Monads.ret</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool_rect"><span class="id" title="definition">bool_rect</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool_rec"><span class="id" title="definition">bool_rec</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> @<a class="idref" href="ConCert.Execution.Extras.html#with_default"><span class="id" title="definition">Extras.with_default</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> @<a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#setter_from_getter_State_balances"><span class="id" title="definition">setter_from_getter_State_balances</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> @<a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#setter_from_getter_State_total_supply"><span class="id" title="definition">setter_from_getter_State_total_supply</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> @<a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#setter_from_getter_State_allowances"><span class="id" title="definition">setter_from_getter_State_allowances</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> @<a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#set_State_balances"><span class="id" title="definition">set_State_balances</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> @<a class="idref" href="ConCert.Execution.Examples.EIP20Token.html#set_State_allowances"><span class="id" title="definition">set_State_allowances</span></a><a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Time</span> <span class="id" title="var">MetaCoq</span> <span class="id" title="var">Run</span><br/>
&nbsp;&nbsp;(<a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#CameLIGO_prepare_extraction"><span class="id" title="definition">CameLIGO_prepare_extraction</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#TT_inlines_eip20token"><span class="id" title="definition">TT_inlines_eip20token</span></a> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#TT_remap_eip20token"><span class="id" title="definition">TT_remap_eip20token</span></a> <a class="idref" href="ConCert.Extraction.CameLIGOExtract.html#TT_rename_ctors_default"><span class="id" title="definition">TT_rename_ctors_default</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> "cctx_instance" <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#LIGO_EIP20Token_MODULE"><span class="id" title="definition">LIGO_EIP20Token_MODULE</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Time</span> <span class="id" title="keyword">Definition</span> <a name="cameLIGO_eip20token"><span class="id" title="definition">cameLIGO_eip20token</span></a> := <span class="id" title="keyword">Eval</span> <span class="id" title="keyword">vm_compute</span> <span class="id" title="tactic">in</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#cameLIGO_eip20token_prepared"><span class="id" title="definition">cameLIGO_eip20token_prepared</span></a>.<br/>

<br/>
</div>

<div class="doc">
We redirect the extraction result for later processing and compiling with the CameLIGO compiler 
</div>
<div class="code">
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;uncomment,&nbsp;once&nbsp;this&nbsp;fix&nbsp;https://gitlab.com/ligolang/ligo/-/merge_requests/1452&nbsp;makes&nbsp;it<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;into&nbsp;a&nbsp;release&nbsp;version.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">Redirect</span> "examples/extracted-code/cameligo-extract/eip20tokenCertifiedExtraction.mligo"<br/>
&nbsp;&nbsp;<span class="id" title="var">MetaCoq</span> <span class="id" title="var">Run</span> (<span class="id" title="constructor">tmMsg</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#cameLIGO_eip20token"><span class="id" title="definition">cameLIGO_eip20token</span></a>).<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ConCert.Extraction.Examples.CameLIGOExtractionTests.html#EIP20TokenExtraction"><span class="id" title="section">EIP20TokenExtraction</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a> and <a href="https://github.com/jgallen23/toc">TOC</a>
</div>
</div>
<script>
  const elements = document.getElementsByClassName("libtitle");
  while(elements.length > 0){
        elements[0].parentNode.removeChild(elements[0]);
  }
  if (window.location.pathname.endsWith("/toc.html")) {
      const jstocDiv = document.getElementById("js-toc");
      jstocDiv.classList.remove("toc");
      jstocDiv.classList.add("jstoc-hidden");
      const jstocHeaderDiv = document.getElementById("js-toc-header");
      jstocHeaderDiv.classList.add("jstoc-hidden");
  }
  console.log(window.location.pathname);
</script>
<script type="text/javascript" src="toc.js"></script>
</body>

</html>
